function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/* eslint-disable @typescript-eslint/no-namespace */
import * as React from 'react';
import * as ReactDOM from 'react-dom';
import PageHeader from './PageHeader'; // import * as retargetEvents from 'react-shadow-dom-retarget-events';

export default class PageHeaderElement extends HTMLElement {
  constructor(...args) {
    super(...args);

    _defineProperty(this, "mountPoint", null);

    _defineProperty(this, "title", '');

    _defineProperty(this, "menuItems", []);
  }

  static get observedAttributes() {
    return ['title'];
  }

  mounted(innerHTML) {
    if (innerHTML) {
      const htmlDoc = new DOMParser().parseFromString(innerHTML, 'text/html');
      const mainMenu = htmlDoc.querySelector('.main-menu');
      this.menuItems = this.getMenuItems(mainMenu === null || mainMenu === void 0 ? void 0 : mainMenu.children);
      return this.menuItems;
    }

    return [];
  }

  getMenuItems(items) {
    if (!items) return [];
    const list = Array.from(items).map(item => {
      if (!item.children || !item.children[0]) return undefined;
      const child = item.children[0];
      const menuItem = {
        title: child.innerText,
        children: [],
        href: child instanceof HTMLAnchorElement ? child.href : ''
      };

      if (item.classList.contains('current-menu-item')) {
        menuItem.current = true;
      }

      if (item.children[2]) {
        menuItem.children = this.getMenuItems(item.children[2].children);
      }

      return menuItem;
    });
    return list.filter(item => item !== undefined);
  }

  createComponent(title, subtitle, logoUrl, menuItems) {
    return React.createElement(PageHeader, {
      title,
      subtitle,
      logoUrl,
      menuItems
    });
  }

  connectedCallback() {
    this.mountPoint = document.createElement('div');
    this.appendChild(this.mountPoint);
    const title = this.getAttribute('title') || this.title;
    const subtitle = this.getAttribute('subtitle') || '';
    const logoUrl = this.getAttribute('logoUrl') || '';
    const menuItems = this.mounted(this.innerHTML);
    ReactDOM.render(this.createComponent(title, subtitle, logoUrl, menuItems), this.mountPoint);
  }

  attributeChangedCallback(title, oldValue, newValue) {
    if (this.mountPoint && title === 'title') {
      ReactDOM.render(this.createComponent(newValue, '', '', []), this.mountPoint);
    }
  }

}
window.customElements.define('page-header', PageHeaderElement);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3BhZ2UtaGVhZGVyL1BhZ2VIZWFkZXJFbGVtZW50LnRzIl0sIm5hbWVzIjpbIlJlYWN0IiwiUmVhY3RET00iLCJQYWdlSGVhZGVyIiwiUGFnZUhlYWRlckVsZW1lbnQiLCJIVE1MRWxlbWVudCIsIm9ic2VydmVkQXR0cmlidXRlcyIsIm1vdW50ZWQiLCJpbm5lckhUTUwiLCJodG1sRG9jIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwibWFpbk1lbnUiLCJxdWVyeVNlbGVjdG9yIiwibWVudUl0ZW1zIiwiZ2V0TWVudUl0ZW1zIiwiY2hpbGRyZW4iLCJpdGVtcyIsImxpc3QiLCJBcnJheSIsImZyb20iLCJtYXAiLCJpdGVtIiwidW5kZWZpbmVkIiwiY2hpbGQiLCJtZW51SXRlbSIsInRpdGxlIiwiaW5uZXJUZXh0IiwiaHJlZiIsIkhUTUxBbmNob3JFbGVtZW50IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJjdXJyZW50IiwiZmlsdGVyIiwiY3JlYXRlQ29tcG9uZW50Iiwic3VidGl0bGUiLCJsb2dvVXJsIiwiY3JlYXRlRWxlbWVudCIsImNvbm5lY3RlZENhbGxiYWNrIiwibW91bnRQb2ludCIsImRvY3VtZW50IiwiYXBwZW5kQ2hpbGQiLCJnZXRBdHRyaWJ1dGUiLCJyZW5kZXIiLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwid2luZG93IiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQSxPQUFPLEtBQUtBLEtBQVosTUFBdUIsT0FBdkI7QUFDQSxPQUFPLEtBQUtDLFFBQVosTUFBMEIsV0FBMUI7QUFDQSxPQUFPQyxVQUFQLE1BQXFDLGNBQXJDLEMsQ0FDQTs7QUFFQSxlQUFlLE1BQU1DLGlCQUFOLFNBQWdDQyxXQUFoQyxDQUE0QztBQUFBO0FBQUE7O0FBQUEsd0NBS2xCLElBTGtCOztBQUFBLG1DQU8vQyxFQVAr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QUFsQixDQUFsQjtBQUNBTixJQUFBQSxRQUFRLENBQUN5QyxNQUFULENBQWdCLEtBQUtULGVBQUwsQ0FBcUJSLEtBQXJCLEVBQTRCUyxRQUE1QixFQUFzQ0MsT0FBdEMsRUFBK0N0QixTQUEvQyxDQUFoQixFQUEyRSxLQUFLeUIsVUFBaEY7QUFDSDs7QUFFREssRUFBQUEsd0JBQXdCLENBQUNsQixLQUFELEVBQWdCbUIsUUFBaEIsRUFBa0NDLFFBQWxDLEVBQW9EO0FBQ3hFLFFBQUksS0FBS1AsVUFBTCxJQUFtQmIsS0FBSyxLQUFLLE9BQWpDLEVBQTBDO0FBQ3RDeEIsTUFBQUEsUUFBUSxDQUFDeUMsTUFBVCxDQUFnQixLQUFLVCxlQUFMLENBQXFCWSxRQUFyQixFQUErQixFQUEvQixFQUFtQyxFQUFuQyxFQUF1QyxFQUF2QyxDQUFoQixFQUE0RCxLQUFLUCxVQUFqRTtBQUNIO0FBQ0o7O0FBaEVzRDtBQW1GM0RRLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsTUFBdEIsQ0FBNkIsYUFBN0IsRUFBNEM3QyxpQkFBNUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlICovXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IFBhZ2VIZWFkZXIsIHsgTWVudUl0ZW0gfSBmcm9tICcuL1BhZ2VIZWFkZXInO1xuLy8gaW1wb3J0ICogYXMgcmV0YXJnZXRFdmVudHMgZnJvbSAncmVhY3Qtc2hhZG93LWRvbS1yZXRhcmdldC1ldmVudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlSGVhZGVyRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIFsndGl0bGUnXTtcbiAgICB9XG5cbiAgICBtb3VudFBvaW50OiBIVE1MU3BhbkVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuICAgIHRpdGxlID0gJyc7XG5cbiAgICBtZW51SXRlbXM6IE1lbnVJdGVtW10gPSBbXTtcblxuICAgIG1vdW50ZWQoaW5uZXJIVE1MOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKGlubmVySFRNTCkge1xuICAgICAgICAgICAgY29uc3QgaHRtbERvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaW5uZXJIVE1MLCAndGV4dC9odG1sJyk7XG4gICAgICAgICAgICBjb25zdCBtYWluTWVudSA9IGh0bWxEb2MucXVlcnlTZWxlY3RvcignLm1haW4tbWVudScpO1xuXG4gICAgICAgICAgICB0aGlzLm1lbnVJdGVtcyA9IHRoaXMuZ2V0TWVudUl0ZW1zKG1haW5NZW51Py5jaGlsZHJlbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW51SXRlbXM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgZ2V0TWVudUl0ZW1zKGl0ZW1zOiBIVE1MQ29sbGVjdGlvbiB8IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoIWl0ZW1zKSByZXR1cm4gW107XG4gICAgICAgIGNvbnN0IGxpc3QgPSBBcnJheS5mcm9tKGl0ZW1zKS5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgICBpZiAoIWl0ZW0uY2hpbGRyZW4gfHwgIWl0ZW0uY2hpbGRyZW5bMF0pIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IGl0ZW0uY2hpbGRyZW5bMF0gYXMgSFRNTEFuY2hvckVsZW1lbnQgfCBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IG1lbnVJdGVtOiBNZW51SXRlbSA9IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogY2hpbGQuaW5uZXJUZXh0LFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgICAgICAgICAgICBocmVmOiBjaGlsZCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50ID8gY2hpbGQuaHJlZiA6ICcnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnY3VycmVudC1tZW51LWl0ZW0nKSkge1xuICAgICAgICAgICAgICAgIG1lbnVJdGVtLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXRlbS5jaGlsZHJlblsyXSkge1xuICAgICAgICAgICAgICAgIG1lbnVJdGVtLmNoaWxkcmVuID0gdGhpcy5nZXRNZW51SXRlbXMoaXRlbS5jaGlsZHJlblsyXS5jaGlsZHJlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVudUl0ZW07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSB1bmRlZmluZWQpIGFzIE1lbnVJdGVtW107XG4gICAgfVxuXG4gICAgY3JlYXRlQ29tcG9uZW50KHRpdGxlOiBzdHJpbmcsIHN1YnRpdGxlOiBzdHJpbmcsIGxvZ29Vcmw6IHN0cmluZywgbWVudUl0ZW1zPzogTWVudUl0ZW1bXSkge1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChQYWdlSGVhZGVyLCB7IHRpdGxlLCBzdWJ0aXRsZSwgbG9nb1VybCwgbWVudUl0ZW1zIH0pO1xuICAgIH1cblxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLm1vdW50UG9pbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLm1vdW50UG9pbnQpO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykgfHwgdGhpcy50aXRsZTtcbiAgICAgICAgY29uc3Qgc3VidGl0bGUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnc3VidGl0bGUnKSB8fCAnJztcbiAgICAgICAgY29uc3QgbG9nb1VybCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdsb2dvVXJsJykgfHwgJyc7XG4gICAgICAgIGNvbnN0IG1lbnVJdGVtcyA9IHRoaXMubW91bnRlZCh0aGlzLmlubmVySFRNTCk7XG4gICAgICAgIFJlYWN0RE9NLnJlbmRlcih0aGlzLmNyZWF0ZUNvbXBvbmVudCh0aXRsZSwgc3VidGl0bGUsIGxvZ29VcmwsIG1lbnVJdGVtcyksIHRoaXMubW91bnRQb2ludCk7XG4gICAgfVxuXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKHRpdGxlOiBzdHJpbmcsIG9sZFZhbHVlOiBzdHJpbmcsIG5ld1ZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMubW91bnRQb2ludCAmJiB0aXRsZSA9PT0gJ3RpdGxlJykge1xuICAgICAgICAgICAgUmVhY3RET00ucmVuZGVyKHRoaXMuY3JlYXRlQ29tcG9uZW50KG5ld1ZhbHVlLCAnJywgJycsIFtdKSwgdGhpcy5tb3VudFBvaW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG4gICAgbmFtZXNwYWNlIEpTWCB7XG4gICAgICAgIGludGVyZmFjZSBJbnRyaW5zaWNFbGVtZW50cyB7XG4gICAgICAgICAgICAncGFnZS1oZWFkZXInOiBQYWdlSGVhZGVyQXR0cmlidXRlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGludGVyZmFjZSBQYWdlSGVhZGVyQXR0cmlidXRlcyB7XG4gICAgICAgICAgICB0aXRsZTogc3RyaW5nO1xuICAgICAgICAgICAgc3VidGl0bGU6IHN0cmluZztcbiAgICAgICAgICAgIGxvZ29Vcmw6IHN0cmluZztcbiAgICAgICAgICAgIGNoaWxkcmVuOiBhbnk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3BhZ2UtaGVhZGVyJywgUGFnZUhlYWRlckVsZW1lbnQpO1xuIl19